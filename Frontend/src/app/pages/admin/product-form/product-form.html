<div class="form-wrapper">
  <h2>{{ esEdicion ? '✏️ Editar' : '➕ Crear Nuevo' }} Producto</h2>

  <form [formGroup]="form" (ngSubmit)="guardar()">
    
    <div class="form-row">
      <div class="form-group">
        <label>Nombre del Producto *</label>
        <input type="text" formControlName="nombre" placeholder="Ej: Zapatillas Nike">
        <small class="error" *ngIf="form.get('nombre')?.invalid && form.get('nombre')?.touched">
          El nombre es obligatorio.
        </small>
      </div>

      <div class="form-group">
        <label>SKU (Código Interno) *</label>
        <input type="text" formControlName="sku" placeholder="Ej: ZAP-001">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Precio ($) *</label>
        <input type="number" formControlName="precio">
      </div>
      
      <div class="form-group">
        <label>Stock (Unidades) *</label>
        <input type="number" formControlName="stock">
      </div>
    </div>

    <div class="form-group">
      <label>Categoría *</label>
      <select formControlName="idCategoria">
        <option [ngValue]="null">-- Selecciona una Categoría --</option>
        <option *ngFor="let cat of categorias" [value]="cat.idCategoria">
          {{ cat.nombre }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label>URL de Imagen</label>
      <input type="text" formControlName="urlImagen" placeholder="http://...">
      <img *ngIf="form.get('urlImagen')?.value" 
           [src]="form.get('urlImagen')?.value" 
           class="preview-img">
    </div>

    <div class="form-group">
      <label>Descripción</label>
      <textarea formControlName="descripcion" rows="4"></textarea>
    </div>

    <div class="actions">
      <button type="button" class="btn-cancel" routerLink="/admin/productos">Cancelar</button>
      <button type="submit" class="btn-save" [disabled]="form.invalid">
        {{ esEdicion ? 'Guardar Cambios' : 'Crear Producto' }}
      </button>
    </div>

  </form>
</div>